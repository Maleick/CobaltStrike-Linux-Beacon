---
phase: 07-generation-and-validation
plan: 03
type: execute
wave: 3
depends_on: [07-02]
files_modified: []
autonomous: false
requirements: [MAC-07, MAC-08]
---

<objective>
Perform end-to-end live check-in validation of the macOS ARM64 beacon against a Cobalt Strike Team Server.

Purpose: Confirm that the beacon's metadata is correctly parsed by the Team Server and that core commands (sleep, pwd, shell) function as expected.
Output: Verified live session in Cobalt Strike and locked-in shell offset fixture.
</objective>

<execution_context>
@/Users/maleick/.gemini/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-generation-and-validation/07-02-SUMMARY.md
</context>

<tasks>

<task type="manual">
  <name>Task 1: Generate and execute macOS beacon</name>
  <files></files>
  <action>
    - Configure an HTTP or HTTPS listener in Cobalt Strike.
    - Use the "Custom Beacons" -> "Generate Custom Beacons" menu in Aggressor.
    - Select the configured listener and set the platform to "macOS".
    - Execute the generated beacon-macos binary on the target macOS host.
  </action>
  <verify>
    The beacon process starts and initiates communication with the Team Server.
  </verify>
  <done>Beacon is running and attempting check-in.</done>
</task>

<task type="manual">
  <name>Task 2: Confirm metadata in Team Server console</name>
  <files></files>
  <action>
    - Observe the "Beacons" tab or console in Cobalt Strike.
    - Confirm the new beacon appears with correct metadata:
      - Hostname: Should match the target macOS host.
      - User: Should match the user executing the beacon.
      - Process Name: Should match the binary name (or "macosbeacon" fallback).
      - OS Version: Should show "15.x" (Sequoia) or the correct marketing version.
      - Architecture: Should indicate x64 (reporting as x64 for CS compatibility).
  </action>
  <verify>
    Metadata displayed in CS matches the target host's actual state.
  </verify>
  <done>Beacon successfully checked in with correct metadata.</done>
</task>

<task type="manual">
  <name>Task 3: Validate core command execution</name>
  <files></files>
  <action>
    - Issue `sleep 5 10` and confirm beacon updates its sleep interval.
    - Issue `pwd` and confirm the current directory is returned correctly.
    - Issue `shell id` and confirm the output of the `id` command is returned.
    - Verify the shell task offset (21 bytes) is correct by checking if the command "id" is correctly parsed and executed (no missing or extra characters).
  </action>
  <verify>
    Commands return expected output in the Beacon console.
  </verify>
  <done>Core commands (sleep, pwd, shell) function correctly on macOS.</done>
</task>

</tasks>

<verification>
Live session in Cobalt Strike confirms all success criteria for Phase 7.
</verification>

<success_criteria>
1. Live check-in: beacon appears in Team Server console with correct metadata.
2. sleep, pwd, and shell commands execute and return correct output in a live session.
3. Shell command offset confirmed at 21 bytes.
</success_criteria>

<output>
After completion, create `.planning/phases/07-generation-and-validation/07-03-SUMMARY.md`
</output>
