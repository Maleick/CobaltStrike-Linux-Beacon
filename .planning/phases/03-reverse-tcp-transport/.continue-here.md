---
phase: 03-reverse-tcp-transport
task: 0
total_tasks: 3
status: not_started
last_updated: 2026-02-26T17:11:15Z
---

<current_state>
Linux v1.0 milestone paused cleanly at the Phase 2/3 boundary. Phases 1 and 2
are 100% complete (all 6 plans executed and verified). Phase 3 has not yet been
planned or discussed. The pause is intentional — context is switching to bootstrap
the macOS ARM64 v2.0 milestone in parallel. No work-in-progress, no uncommitted
changes, no blockers on the Linux stream.
</current_state>

<completed_work>

- Phase 1 (Baseline Validation Harness): COMPLETE — 3/3 plans, REL-01 + REL-02 satisfied
  - Fixture corpus, index, regression harness entrypoints
  - Malformed-task parser hardening test matrix
  - Protocol/command smoke compatibility regression suite

- Phase 2 (HTTP/S Profile Abstraction): COMPLETE — 3/3 plans, C2P-01 + C2P-02 + C2P-03 satisfied
  - External profile schema and loader path for generation/runtime config
  - HTTP/S metadata/transport fields refactored to consume profile data
  - Profile compatibility matrix validated across default and custom fixtures

- config.json: branching_strategy updated from "none" → "milestone" (2026-02-26)
  to enable parallel Linux v1 / macOS v2 stream isolation going forward.
</completed_work>

<remaining_work>

- Phase 3 — 03-01: Implement TCP transport module and runtime mode selection [NOT STARTED]
- Phase 3 — 03-02: Extend generation scripts/Aggressor flow for transport mode selection [NOT STARTED]
- Phase 3 — 03-03: Add reconnect/backoff policy and transport-mode regression tests [NOT STARTED]
- Phase 4 — Security and Build Hygiene (3 plans) [NOT STARTED]
- Phase 5 — CI and Release Readiness (2 plans) [NOT STARTED]

v1.0 requirements pending: NET-01, NET-02, NET-03, SEC-01, SEC-02, SEC-03, REL-03
</remaining_work>

<decisions_made>

- branching_strategy: "milestone" — set 2026-02-26 to support parallel Linux v1 + mac v2 streams
  on separate milestone branches without commit cross-contamination.

- macOS ARM64 v2.0 milestone is being bootstrapped in parallel — does NOT block
  Linux v1 Phase 3. The two streams are independent and run on separate branches.

- Phase 3 scope is unambiguous: reverse TCP transport, operator-selectable mode
  (http/https/tcp), bounded reconnect/backoff. Requirements NET-01..NET-03 map directly.

- No decisions made about Phase 3 implementation approach yet — TCP transport module
  design is open and should be discussed via /gsd:discuss-phase 3 at resume time.
</decisions_made>

<blockers>

None. Clean boundary between completed Phase 2 and unstarted Phase 3.
</blockers>

<context>
Linux v1.0 is well-structured: Phases 1+2 built regression safety and profile abstraction.
Phase 3 (TCP transport) is the next natural step — adds a second transport type while
the profile abstraction from Phase 2 means the connection-level code can be cleanly
separated from the HTTP-specific profile machinery.

The implant source is in `implant/src/` with `http.c` handling the current HTTP/S
transport. TCP transport will likely live in a new `tcp.c` module with a shared
interface consumed by `beacon.c`. The Aggressor generation script (`CustomBeacon.cna`)
and Python generation tools (`generate-payload/InsertListenerInfo.py`) will need
transport-mode awareness.

macOS v2 context: a parallel milestone is being bootstrapped with the GSD new-milestone
flow. It targets `implant-macos/` as a separate source tree. When switching back to
Linux v1, the mac work should be on a different branch — check `git branch` first.
</context>

<next_action>
Start with: `/gsd:discuss-phase 3` to surface approach options for the TCP transport
module before planning. Key design questions to answer in discussion:
  1. Separate tcp.c module vs. transport abstraction layer in beacon.c?
  2. How does the generation script encode transport mode selection?
  3. Reconnect/backoff: fixed intervals vs. exponential with jitter?
Then: `/gsd:plan-phase 3` to create the 3-plan breakdown.
</next_action>
